<!-- templates/synthesizer.html -->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SQL Query Synthesizer</title>
    <style>
        body {
            display: flex;
            margin: 0;
            padding: 0;
            height: 100vh;
        }

        .column {
            flex: 1;
            padding: 20px;
        }

        #input-column, #output-column, #synthesize-column {
            border: 1px solid #ccc;
            border-radius: 10px;
            margin: 10px;
            padding: 10px;
        }

        .table-container {
            margin-bottom: 10px;
        }

        .code-block {
            width: 100%;
            height: 100%;
            resize: none;
        }
    </style>
</head>
<body>

    <div id="input-column" class="column">
        <h2>Input</h2>
        <div id="input-tables">
            <!-- Template for each input table -->
            <div class="table-container" id="input-table-template">
                <h3>Table Title</h3>
                <table border="1">
                    <thead>
                        <tr>
                            <th>Column 1</th>
                            <th>Column 2</th>
                            <!-- Add more columns as needed -->
                            <th><button onclick="addColumn(this)">+</button></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><input type="text" placeholder="Data 1"></td>
                            <td><input type="text" placeholder="Data 2"></td>
                            <!-- Add more columns as needed -->
                            <td><button onclick="removeColumn(this)">-</button></td>
                        </tr>
                        <!-- Add more rows as needed -->
                    </tbody>
                </table>
                <button onclick="addTable()">Add Table</button>
                <button onclick="removeTable(this)">Remove Table</button>
            </div>
        </div>
    </div>

    <div id="output-column" class="column">
        <h2>Output</h2>
        <div id="output-table">
            <h3>Output</h3>
            <table border="1">
                <thead>
                    <tr>
                        <th>Column 1</th>
                        <th>Column 2</th>
                        <!-- Add more columns as needed -->
                        <th><button onclick="addColumn(this)">+</button></th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><input type="text" placeholder="Data 1"></td>
                        <td><input type="text" placeholder="Data 2"></td>
                        <!-- Add more columns as needed -->
                        <td><button onclick="removeColumn(this)">-</button></td>
                    </tr>
                    <!-- Add more rows as needed -->
                </tbody>
            </table>
        </div>
    </div>

    <div id="synthesize-column" class="column">
        <h2>Synthesize</h2>
        <code>
            <textarea class="code-block" readonly></textarea>
        </code>
    </div>

    <script>
        function addTable() {
            var inputTableTemplate = document.getElementById('input-table-template');
            var inputTables = document.getElementById('input-tables');
            var newTable = inputTableTemplate.cloneNode(true);
            newTable.style.display = 'block';
            inputTables.appendChild(newTable);
        }

        function removeTable(button) {
            var tableContainer = button.parentNode;
            tableContainer.parentNode.removeChild(tableContainer);
        }

        function addColumn(button) {
            var table = button.closest('table');
            var headerRow = table.querySelector('thead tr');
            var bodyRows = table.querySelectorAll('tbody tr');

            var newColumnIndex = headerRow.children.length - 1;

            // Add column header
            var th = document.createElement('th');
            th.textContent = 'Column ' + (newColumnIndex + 1);
            headerRow.insertBefore(th, button.parentNode);

            // Add column cells to each row
            bodyRows.forEach(function (row) {
                var td = document.createElement('td');
                var input = document.createElement('input');
                input.type = 'text';
                input.placeholder = 'Data ' + (newColumnIndex + 1);
                td.appendChild(input);
                row.insertBefore(td, button.parentNode);
            });
        }

        function removeColumn(button) {
            var table = button.closest('table');
            var headerRow = table.querySelector('thead tr');
            var bodyRows = table.querySelectorAll('tbody tr');

            if (headerRow.children.length > 2) {
                // Remove column header
                headerRow.removeChild(button.parentNode);

                // Remove column cells from each row
                bodyRows.forEach(function (row) {
                    row.removeChild(button.parentNode.previousElementSibling);
                });
            }
        }
    </script>

</body>
</html>
